# build like:
#   singularity build --fakeroot onnx-runtime.sif onnx-runtime.def

Bootstrap: docker
# From: nvcr.io/nvidia/cuda:11.6.1-base-ubuntu20.04
From: nvcr.io/nvidia/tensorrt:22.05-py3

%post
    apt-get -y update
    apt-get -y install less
    apt-get -y install ffmpeg
    apt-get -y install python3-pip
    apt-get -y install libsm6
    apt-get -y install libxext6
    apt-get -y install libxrender-dev
    apt-get -y install libjpeg8-dev
    apt-get -y install zlib1g-dev
    apt-get -y clean

    # Upgrade pip
    pip3 install --upgrade pip
    pip3 install onnx onnxruntime-gpu==1.11 imageio
