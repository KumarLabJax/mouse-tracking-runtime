# build like:
#   singularity build --fakeroot deployment-runtime.sif deployment-runtime-RHEL7.def
# This image is compliant with RHEL 7-8 host OS, not 9.
# Please use the other definition file for RHEL 9 host OS.

Bootstrap: docker
From: nvcr.io/nvidia/tensorrt:22.05-py3

%post
    apt-get -y update
    apt-get -y install less ffmpeg python3-pip libsm6 libxext6 libxrender-dev libjpeg8-dev zlib1g-dev
    apt-get -y clean

    # Upgrade pip
    pip3 install --upgrade pip
    pip3 install -r ../requirements.txt

%environment
    export PYTHONPATH=$PYTHONPATH:/kumar_lab_models/deployment_runtime/
